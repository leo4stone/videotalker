<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src 'self'"
    />
    <title>VideoTalker - 视频播放器</title>
    
    <!-- Video.js CSS -->
    <link href="./node_modules/video.js/dist/video-js.css" rel="stylesheet">
    
    <!-- LESS 样式表 -->
    <link rel="stylesheet/less" type="text/css" href="styles.less" />
    
    <!-- LESS 编译器 -->
    <script src="./node_modules/less/dist/less.min.js"></script>

  </head>
  <body>
    <!-- 全屏视频容器 -->
    <div class="video-container">
      <video
        id="video-player"
        class="video-js vjs-default-skin"
        preload="auto"
        data-setup="{}"
      >
        <p class="vjs-no-js">
          要查看此视频，请启用 JavaScript，并考虑升级到
          <a href="https://videojs.com/html5-video-support/" target="_blank">
            支持HTML5视频的网络浏览器
          </a>。
        </p>
      </video>
    </div>

    <!-- 文件信息浮层 -->
    <div class="file-info-overlay" id="file-info-overlay">
      请选择一个视频文件开始播放
    </div>

    <!-- 视频进度条 -->
    <div class="progress-container" id="progress-container">
      <div class="progress-bar" id="progress-bar">
        <div class="progress-line"></div>
        <div class="progress-handle">
          <div class="current-time-display" id="current-time-display">
            <span class="time-text">00:00</span>
            <button class="add-annotation-btn" id="add-annotation-btn" title="添加打点"></button>
          </div>
        </div>
      </div>
      <div class="progress-tooltip" id="progress-tooltip">
        <div class="tooltip-line"></div>
        <div class="tooltip-text" id="tooltip-text">00:00</div>
      </div>
      <!-- 视频总时长显示 -->
      <div class="video-duration-display" id="video-duration-display">
        <span class="duration-text">00:00</span>
      </div>
    </div>

    <!-- 展开按钮 -->
    <button class="expand-button" id="expand-button">›</button>

    <!-- 左下角播放/暂停按钮 -->
    <button class="floating-play-button" id="floating-play-button">
      <div class="play-icon" id="play-icon"></div>
      <div class="pause-icon" id="pause-icon" style="display: none;"></div>
    </button>

    <!-- 右侧侧边栏 -->
    <div class="overlay-ui" id="overlay-ui">
      <!-- 侧边栏头部 -->
      <div class="sidebar-header">
        <h1 class="app-title">VideoTalker</h1>
        <p class="app-subtitle">视频播放器</p>
      </div>

      <!-- 控制区域 -->
      <div class="control-section">
        <div class="section-title">文件操作</div>
        <div class="controls">
          <button class="btn primary" id="open-file">
            <span>选择视频文件</span>
            <span>📁</span>
          </button>
        </div>
      </div>

      <!-- 播放控制区域 (仅在有视频时显示) -->
      <div class="control-section hide-when-no-video" id="playback-controls">
        <div class="section-title">播放控制</div>
        <div class="controls">
          <button class="btn" id="fullscreen">
            <span>全屏播放</span>
            <span>⛶</span>
          </button>
        </div>
      </div>

      <!-- 播放信息 (仅在有视频时显示) -->
      <div class="info-section hide-when-no-video" id="video-info">
        <div class="section-title">播放信息</div>
        <div class="panel-item">
          <div class="panel-label">文件名</div>
          <div class="panel-value" id="panel-filename">未选择文件</div>
        </div>
        <div class="panel-item">
          <div class="panel-label">时长</div>
          <div class="panel-value" id="panel-duration">--:--</div>
        </div>
        <div class="panel-item">
          <div class="panel-label">当前时间</div>
          <div class="panel-value" id="panel-current-time">--:--</div>
        </div>
        <div class="panel-item">
          <div class="panel-label">音量</div>
          <div class="panel-value" id="panel-volume">100%</div>
        </div>
        <div class="panel-item">
          <div class="panel-label">播放速度</div>
          <div class="panel-value" id="panel-playback-rate">1.0x</div>
        </div>
      </div>

      <!-- 高级功能 -->
      <div class="control-section">
        <div class="section-title">高级功能</div>
        <div class="controls">
          <button class="btn" id="check-support">
            <span>检查格式支持</span>
            <span>🔍</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Video.js JavaScript -->
    <script src="./node_modules/video.js/dist/video.min.js"></script>
    <script src="annotations.js"></script>
    <script src="renderer.js"></script>
  </body>
</html>